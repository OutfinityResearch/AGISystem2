<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AGISystem2 – NL→DSL Grammar-Based Translation</title>
  <link rel="stylesheet" href="../../reference/style.css">
  <style>
    .research-section { background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0; }
    .challenge-box { background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
    .solution-box { background: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
    .code-example { background: #263238; color: #aed581; padding: 15px; border-radius: 8px; font-family: monospace; overflow-x: auto; margin: 15px 0; }
    h2 { border-bottom: 2px solid #1976d2; padding-bottom: 10px; margin-top: 40px; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background: #1976d2; color: white; }
  </style>
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>NL→DSL Grammar-Based Translation</h1>
    <small>
      <a href="../../index.html">Home</a> ·
      <a href="../index.html">Research</a> ·
      <a href="../roadmap.html">Roadmap</a>
    </small>
    <small>Deterministic natural language parsing without LLM dependencies</small>
  </div>

  <div class="research-section">
    <h2 style="margin-top: 0; border: none;">Research Overview</h2>
    <p><strong>Goal:</strong> Extend the NL2DSL grammar engine to handle 95%+ of structured natural language patterns deterministically, without requiring LLM assistance.</p>
    <p><strong>Current Status:</strong> ~70% coverage of academic benchmark patterns</p>
    <p><strong>Target:</strong> 95% coverage by Q4 2025</p>
  </div>

  <h2>1. Current Architecture</h2>

  <p>The grammar-based translator uses a multi-stage pipeline:</p>

  <div class="code-example">
<pre>
Natural Language Input
        │
        ▼
┌───────────────────┐
│ Sentence Splitter │  ← Split complex sentences
└───────────────────┘
        │
        ▼
┌───────────────────┐
│ Pattern Matcher   │  ← Match against grammar rules
└───────────────────┘
        │
        ▼
┌───────────────────┐
│ Structure Builder │  ← Build DSL AST
└───────────────────┘
        │
        ▼
┌───────────────────┐
│ DSL Serializer    │  ← Output DSL text
└───────────────────┘
</pre>
  </div>

  <h2>2. Pattern Categories</h2>

  <table>
    <tr>
      <th>Category</th>
      <th>Examples</th>
      <th>Coverage</th>
      <th>Priority</th>
    </tr>
    <tr>
      <td><strong>IS-A Relations</strong></td>
      <td>"X is a Y", "Every X is a Y"</td>
      <td style="color: #2e7d32; font-weight: bold;">95%</td>
      <td>Done</td>
    </tr>
    <tr>
      <td><strong>HAS-A Relations</strong></td>
      <td>"X has Y", "X contains Y"</td>
      <td style="color: #2e7d32; font-weight: bold;">90%</td>
      <td>Done</td>
    </tr>
    <tr>
      <td><strong>Simple Conditionals</strong></td>
      <td>"If X then Y"</td>
      <td style="color: #2e7d32; font-weight: bold;">85%</td>
      <td>Done</td>
    </tr>
    <tr>
      <td><strong>Quantifiers</strong></td>
      <td>"All X", "Some X", "No X"</td>
      <td style="color: #ff9800; font-weight: bold;">60%</td>
      <td>P1</td>
    </tr>
    <tr>
      <td><strong>Temporal</strong></td>
      <td>"Before X", "After Y", "During Z"</td>
      <td style="color: #ff9800; font-weight: bold;">50%</td>
      <td>P1</td>
    </tr>
    <tr>
      <td><strong>Comparatives</strong></td>
      <td>"X is more than Y", "X is the most Z"</td>
      <td style="color: #c62828; font-weight: bold;">30%</td>
      <td>P2</td>
    </tr>
    <tr>
      <td><strong>Nested Conditions</strong></td>
      <td>"If X and Y then Z unless W"</td>
      <td style="color: #c62828; font-weight: bold;">25%</td>
      <td>P2</td>
    </tr>
  </table>

  <h2>3. Priority 1: Quantifier Expansion</h2>

  <div class="challenge-box">
    <strong>Challenge:</strong> Natural language quantifiers are nuanced and context-dependent.
    <ul>
      <li>"All cats are mammals" → Universal quantifier</li>
      <li>"Some birds can fly" → Existential quantifier</li>
      <li>"Most students passed" → Majority quantifier (not FOL)</li>
      <li>"Few exceptions exist" → Minority quantifier</li>
    </ul>
  </div>

  <div class="solution-box">
    <strong>Approach:</strong> Implement a quantifier normalizer that:
    <ol>
      <li>Identifies quantifier phrases via pattern matching</li>
      <li>Maps to formal quantifier types (∀, ∃, majority, etc.)</li>
      <li>Generates appropriate DSL with variable bindings</li>
    </ol>
  </div>

  <div class="code-example">
<pre>
<span style="color: #78909c;">// Input</span>
"All mammals have a heart"

<span style="color: #78909c;">// Parsed structure</span>
{
  quantifier: "universal",
  variable: "?x",
  domain: "Mammal",
  predicate: { op: "has", subject: "?x", object: "heart" }
}

<span style="color: #78909c;">// Output DSL</span>
@r1 Implies (isA ?x Mammal) (has ?x heart)
</pre>
  </div>

  <h2>4. Priority 1: Temporal Expressions</h2>

  <div class="challenge-box">
    <strong>Challenge:</strong> Temporal relations require understanding of:
    <ul>
      <li>Point-in-time references ("in 1990", "yesterday")</li>
      <li>Interval relations ("during the meeting", "throughout the year")</li>
      <li>Ordering ("before X", "after Y", "between A and B")</li>
      <li>Duration ("for 3 hours", "since Monday")</li>
    </ul>
  </div>

  <div class="solution-box">
    <strong>Approach:</strong> Use Allen's interval algebra as the formal foundation:
    <ol>
      <li>Extract temporal expressions via regex + NLP patterns</li>
      <li>Normalize to interval representation</li>
      <li>Map to DSL temporal operators (before, after, during, overlaps)</li>
    </ol>
  </div>

  <h2>5. Implementation Plan</h2>

  <table>
    <tr>
      <th>Phase</th>
      <th>Deliverable</th>
      <th>Timeline</th>
    </tr>
    <tr>
      <td>Phase 1</td>
      <td>Universal/existential quantifiers (∀, ∃)</td>
      <td>Q1 2025</td>
    </tr>
    <tr>
      <td>Phase 2</td>
      <td>Temporal point references</td>
      <td>Q1 2025</td>
    </tr>
    <tr>
      <td>Phase 3</td>
      <td>Temporal intervals (Allen relations)</td>
      <td>Q2 2025</td>
    </tr>
    <tr>
      <td>Phase 4</td>
      <td>Comparative structures</td>
      <td>Q2 2025</td>
    </tr>
    <tr>
      <td>Phase 5</td>
      <td>Nested conditionals with exceptions</td>
      <td>Q3 2025</td>
    </tr>
    <tr>
      <td>Phase 6</td>
      <td>Edge case hardening, 95% target</td>
      <td>Q4 2025</td>
    </tr>
  </table>

  <h2>6. Evaluation Metrics</h2>

  <ul>
    <li><strong>Pattern coverage:</strong> % of benchmark sentences parsed correctly</li>
    <li><strong>Semantic accuracy:</strong> % of DSL outputs that preserve meaning</li>
    <li><strong>Parse time:</strong> Average ms per sentence</li>
    <li><strong>Error clarity:</strong> % of failures with actionable error messages</li>
  </ul>

  <h2>7. Related Work</h2>

  <ul>
    <li><a href="../../theory/nl2dsl.html">NL2DSL Translation Layer</a> – Current implementation</li>
    <li><a href="nl2dsl-llm.html">LLM-Assisted Translation</a> – Complementary approach</li>
    <li><a href="../benchmarks.html">External Benchmarks</a> – Evaluation results</li>
  </ul>

  <div class="footer-nav">
    <p><a href="../roadmap.html">&larr; Back to Research Roadmap</a></p>
  </div>
  </div>
</body>
</html>
