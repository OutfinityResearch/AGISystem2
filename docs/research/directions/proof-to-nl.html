<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AGISystem2 – Proof→NL Generation</title>
  <link rel="stylesheet" href="../../reference/style.css">
  <style>
    .research-section { background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0; }
    .example-box { background: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
    .challenge-box { background: #fff3e0; border-left: 4px solid #ff9800; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
    .code-example { background: #263238; color: #aed581; padding: 15px; border-radius: 8px; font-family: monospace; overflow-x: auto; margin: 15px 0; }
    h2 { border-bottom: 2px solid #1976d2; padding-bottom: 10px; margin-top: 40px; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background: #1976d2; color: white; }
  </style>
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>Proof→NL Generation</h1>
    <small>
      <a href="../../index.html">Home</a> ·
      <a href="../index.html">Research</a> ·
      <a href="../roadmap.html">Roadmap</a>
    </small>
    <small>Generating human-readable explanations from formal proofs</small>
  </div>

  <div class="research-section">
    <h2 style="margin-top: 0; border: none;">Research Overview</h2>
    <p><strong>Goal:</strong> Transform formal proof traces into fluent, understandable natural language explanations.</p>
    <p><strong>Why it matters:</strong> Formal reasoning is only valuable if users can understand and trust the conclusions. Clear explanations enable verification and build confidence in AI-assisted decisions.</p>
  </div>

  <h2>1. The Explainability Challenge</h2>

  <div class="code-example">
<pre>
<span style="color: #78909c;">// Formal proof trace (machine-readable)</span>
{
  "goal": "isA Socrates Mortal",
  "method": "rule_application",
  "rule": "@r1 Implies (isA ?x Human) (isA ?x Mortal)",
  "bindings": { "?x": "Socrates" },
  "premises": [
    { "goal": "isA Socrates Human", "method": "direct_kb", "confidence": 1.0 }
  ],
  "confidence": 1.0
}
</pre>
  </div>

  <div class="example-box">
    <strong>Desired output:</strong>
    <p style="margin-bottom: 0;">"Socrates is mortal. This follows because Socrates is human, and the rule states that all humans are mortal."</p>
  </div>

  <h2>2. Generation Architecture</h2>

  <div class="code-example">
<pre>
Proof Trace
        │
        ▼
┌───────────────────┐
│ Structure Analyzer│  ← Identify proof pattern
└───────────────────┘
        │
        ▼
┌───────────────────┐
│ Template Selector │  ← Choose appropriate template
└───────────────────┘
        │
        ▼
┌───────────────────┐
│ Slot Filler       │  ← Fill template with entities
└───────────────────┘
        │
        ▼
┌───────────────────┐
│ Fluency Enhancer  │  ← (Optional) LLM polish
└───────────────────┘
        │
        ▼
Natural Language Output
</pre>
  </div>

  <h2>3. Template Library</h2>

  <table>
    <tr>
      <th>Proof Pattern</th>
      <th>Template</th>
      <th>Example Output</th>
    </tr>
    <tr>
      <td><strong>Direct fact</strong></td>
      <td>"{subject} {relation} {object}. This is a known fact."</td>
      <td>"Tom is a cat. This is a known fact."</td>
    </tr>
    <tr>
      <td><strong>Transitive chain</strong></td>
      <td>"{subject} {relation} {target} because {chain steps}."</td>
      <td>"Penguins are animals because penguins are birds, and birds are animals."</td>
    </tr>
    <tr>
      <td><strong>Rule application</strong></td>
      <td>"{conclusion} follows because {premises}, and the rule states that {rule in NL}."</td>
      <td>"Socrates is mortal because Socrates is human, and all humans are mortal."</td>
    </tr>
    <tr>
      <td><strong>Compound (AND)</strong></td>
      <td>"{conclusion} holds because both {A} and {B} are true."</td>
      <td>"The system is ready because power is on and tests passed."</td>
    </tr>
    <tr>
      <td><strong>Negation</strong></td>
      <td>"{subject} is not {property} because {reason}."</td>
      <td>"Penguins cannot fly because they are flightless birds."</td>
    </tr>
  </table>

  <h2>4. Verbosity Levels</h2>

  <table>
    <tr>
      <th>Level</th>
      <th>Description</th>
      <th>Use Case</th>
    </tr>
    <tr>
      <td><strong>Minimal</strong></td>
      <td>Just the conclusion</td>
      <td>Quick answers, dashboards</td>
    </tr>
    <tr>
      <td><strong>Summary</strong></td>
      <td>Conclusion + key reason</td>
      <td>Reports, notifications</td>
    </tr>
    <tr>
      <td><strong>Detailed</strong></td>
      <td>Full proof chain in NL</td>
      <td>Audit trails, debugging</td>
    </tr>
    <tr>
      <td><strong>Educational</strong></td>
      <td>Step-by-step with explanations</td>
      <td>Learning, training</td>
    </tr>
  </table>

  <div class="example-box">
    <strong>Example: Same proof, different verbosity levels</strong>
    <p><strong>Minimal:</strong> "Socrates is mortal."</p>
    <p><strong>Summary:</strong> "Socrates is mortal because all humans are mortal."</p>
    <p><strong>Detailed:</strong> "We can conclude that Socrates is mortal. The reasoning is as follows: First, it is established that Socrates is human (known fact from the knowledge base). Second, there is a rule stating that if something is human, then it is mortal. Applying this rule to Socrates, we derive that Socrates is mortal."</p>
    <p style="margin-bottom: 0;"><strong>Educational:</strong> "Let's trace through how we know Socrates is mortal. We start with what we know: Socrates is human (this is given as a fact). Now, we have a rule in logic that says 'All humans are mortal' – this means if we know something is human, we can conclude it is mortal. Since Socrates is human, we apply this rule and conclude: Socrates is mortal. This is called 'modus ponens' – a fundamental logical inference."</p>
  </div>

  <h2>5. LLM Enhancement (Optional)</h2>

  <div class="challenge-box">
    <strong>Template limitations:</strong> Templates produce grammatically correct but sometimes stilted text. LLMs can improve fluency without changing meaning.
  </div>

  <div class="code-example">
<pre>
<span style="color: #78909c;">// LLM polishing prompt</span>
const prompt = `
Improve the fluency of this explanation while preserving ALL facts:

Original: "${templateOutput}"

Requirements:
- Do NOT add, remove, or change any facts
- Improve grammar and natural flow only
- Keep it concise
- All entities from original must appear

Improved version:
`;
</pre>
  </div>

  <h2>6. Multi-Language Support</h2>

  <p>Templates can be defined in multiple languages:</p>

  <table>
    <tr>
      <th>Language</th>
      <th>Template (rule application)</th>
    </tr>
    <tr>
      <td><strong>English</strong></td>
      <td>"{conclusion} follows because {premises}, and the rule states that {rule}."</td>
    </tr>
    <tr>
      <td><strong>Romanian</strong></td>
      <td>"{conclusion} rezultă deoarece {premises}, iar regula spune că {rule}."</td>
    </tr>
    <tr>
      <td><strong>French</strong></td>
      <td>"{conclusion} découle du fait que {premises}, et la règle stipule que {rule}."</td>
    </tr>
    <tr>
      <td><strong>German</strong></td>
      <td>"{conclusion} folgt daraus, dass {premises}, und die Regel besagt, dass {rule}."</td>
    </tr>
  </table>

  <h2>7. Research Questions</h2>

  <ul>
    <li><strong>Template coverage:</strong> How many templates are needed for 95% of proofs?</li>
    <li><strong>User evaluation:</strong> How do users rate explanation quality?</li>
    <li><strong>LLM vs template:</strong> When does LLM enhancement add value?</li>
    <li><strong>Compression:</strong> How to summarize long proof chains effectively?</li>
    <li><strong>Uncertainty:</strong> How to communicate confidence levels naturally?</li>
  </ul>

  <h2>8. Related Work</h2>

  <ul>
    <li><a href="text-generation.html">Essay & Document Generation</a> – Extended text generation</li>
    <li><a href="../../guides/llm-integration.html">LLM Integration</a> – Using LLMs for enhancement</li>
    <li><a href="../../theory/index.html">Theory</a> – Reasoning foundations</li>
  </ul>

  <div class="footer-nav">
    <p><a href="../roadmap.html">&larr; Back to Research Roadmap</a></p>
  </div>
  </div>
</body>
</html>
