<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Inference & Reasoning</title>
  <link rel="stylesheet" href="../reference/style.css">
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>AGISystem2 – Inference & Reasoning</h1>
    <small>
      <a href="../index.html">Home</a> ·
      <a href="../guides/conceptual_spaces.html">Theory</a> ·
      <a href="index.html">Architecture</a> ·
      <a href="../api/index.html">APIs</a> ·
      <a href="../syntax/index.html">Syntax</a> ·
      <a href="../usage-cli/index.html">CLI</a> ·
      <a href="../wiki/index.html">Wiki</a> ·
      <a href="../specs/matrix.html">Specs</a>
    </small>
    <div class="sub-nav">
      <strong>Architecture:</strong>
      <a href="index.html">Overview</a> ·
      <a href="geometry.html">Geometry</a> ·
      <a href="knowledge.html">Knowledge</a> ·
      <a href="learning.html">Learning</a> ·
      <a href="reasoning.html">Reasoning</a> ·
      <a href="inference.html">Inference</a> ·
      <a href="language.html">Language</a> ·
      <a href="storage.html">Storage</a> ·
      <a href="configuration.html">Configuration</a> ·
      <a href="evalsuite.html">Eval Suite</a>
    </div>
  </div>

  <p>This page focuses on the inference strategies used by AGISystem2. It complements the Reasoning Layer overview by explaining how the system performs deduction, abduction, the current state of induction, and how it chooses which mechanisms to combine when answering questions.</p>

  <div class="section-intro">
    <p><strong>Specification:</strong> DS(/reason/reasoner.js) · DS(/reason/inference_engine.js) · DS(/reason/retrieval.js) · DS(/reason/bias_control.js) · DS(/ingest/clustering.js)</p>
  </div>

  <h2 id="induction">Induction (current state)</h2>
  <p>Explicit inductive rule learning is not yet implemented. The system currently performs lightweight generalisation in two ways:</p>
  <ul>
    <li><strong>Geometric widening:</strong> each new observation expands bounded diamonds via `ClusterManager.updateClusters`, so concepts gradually cover observed examples.</li>
    <li><strong>Forward chaining:</strong> `InferenceEngine.forwardChain` (symbolic) can derive additional facts when composition or transitive rules are registered, but it does not learn new rules from data.</li>
  </ul>
  <p>Future work noted in specs: rule induction from repeated patterns and default-rule learning. Until then, induction is limited to geometric coverage and manually provided rules/defaults.</p>

  <h2 id="deduction">Deduction</h2>
  <p>Deduction checks whether facts already support a claim, optionally using transitive and inheritance chains.</p>
  <ul>
    <li><strong>Direct and transitive:</strong> `Reasoner.deduceIsA` and `Reasoner.deduceTransitive` walk fact graphs with configurable depth limits from `Config.maxReasonerIterations`.</li>
    <li><strong>Inheritance:</strong> `Reasoner.deduceWithInheritance` lifts relations through `IS_A` chains (e.g., Tesla inherits wheels from car).</li>
    <li><strong>Geometric membership:</strong> `Reasoner.answer` compares an encoded query vector against the composed concept diamond (with optional masks), returning sceptic/optimist bands.</li>
    <li><strong>Symbolic proofing:</strong> `InferenceEngine.infer` tries `direct → transitive → symmetric → inverse → composition → inheritance → default` until it finds a cert or default truth.</li>
  </ul>

  <h2 id="abduction">Abduction</h2>
  <p>Two complementary abductive paths exist:</p>
  <ul>
    <li><strong>Geometric inverse binding:</strong> `Reasoner.abductive` inverses relation permutations to guess likely causes/effects in vector space, re-ranking candidates with usage priority.</li>
    <li><strong>Fact-based causes:</strong> `Reasoner.abductCause` traverses `CAUSES/CAUSED_BY` facts (optionally transitively) and orders hypotheses by priority minus depth penalty.</li>
  </ul>
  <p>Both return ranked hypotheses with bands (`TRUE_CERTAIN`/`PLAUSIBLE`/`FALSE`), enabling downstream filters (bias control, validation).</p>

  <h2 id="selection">Choosing and combining mechanisms</h2>
  <p>Reasoning mode selection is currently deterministic and rule-based:</p>
  <ul>
    <li><strong>API heuristics:</strong> `EngineAPI.ask` routes queries by relation type: `IS_A` → `deduceIsA`, known transitive relations → `deduceTransitive`, inheritable relations → `deduceWithInheritance`, otherwise `factExists`. Geometric scoring (`answer`) runs in parallel when encoding succeeds.</li>
    <li><strong>Plugin delegation:</strong> `Reasoner.factExists` checks compute plugins (`PluginRegistry`, `MathPlugin`) for computable relations before returning `UNKNOWN`.</li>
    <li><strong>Proof search order:</strong> `InferenceEngine.infer` uses a fixed ordering (direct → transitive → symmetric → inverse → composition → inheritance → default); callers can override via `options.methods`.</li>
    <li><strong>Context layering:</strong> theory layers passed via `contextStack` are merged before reasoning, so hypothetical or domain-specific facts influence all modes consistently.</li>
  </ul>

  <div class="diagram">
    <svg viewBox="0 0 560 180" role="img" aria-label="Reasoning selection flow">
      <defs>
        <marker id="arrow-infer" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
          <path d="M0,0 L6,3 L0,6 z" fill="#0f4c81" />
        </marker>
      </defs>
      <rect x="20" y="60" width="90" height="60" rx="6" fill="#f5f7fb" stroke="#0f4c81" stroke-width="2"/>
      <text x="65" y="85" font-size="10" font-weight="bold" fill="#0f4c81" text-anchor="middle">Question</text>
      <text x="65" y="100" font-size="8" fill="#4a5670" text-anchor="middle">Sys2DSL</text>

      <rect x="140" y="30" width="110" height="40" rx="6" fill="#e1ecf7" stroke="#0f4c81" stroke-width="2"/>
      <text x="195" y="55" font-size="9" font-weight="bold" fill="#0f4c81" text-anchor="middle">Deduction</text>
      <text x="195" y="68" font-size="7" fill="#4a5670" text-anchor="middle">direct/transitive/inheritance</text>

      <rect x="140" y="100" width="110" height="40" rx="6" fill="#e1ecf7" stroke="#0f4c81" stroke-width="2"/>
      <text x="195" y="125" font-size="9" font-weight="bold" fill="#0f4c81" text-anchor="middle">Abduction</text>
      <text x="195" y="138" font-size="7" fill="#4a5670" text-anchor="middle">inverse permute + causes</text>

      <rect x="280" y="65" width="110" height="50" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2"/>
      <text x="335" y="90" font-size="9" font-weight="bold" fill="#2e7d32" text-anchor="middle">Geometric</text>
      <text x="335" y="103" font-size="7" fill="#4a5670" text-anchor="middle">`answer` bands</text>

      <rect x="420" y="40" width="110" height="40" rx="6" fill="#fff3e0" stroke="#e65100" stroke-width="2"/>
      <text x="475" y="65" font-size="9" font-weight="bold" fill="#e65100" text-anchor="middle">Bias/Validation</text>
      <text x="475" y="78" font-size="7" fill="#4a5670" text-anchor="middle">optional</text>

      <rect x="420" y="110" width="110" height="40" rx="6" fill="#e1ecf7" stroke="#0f4c81" stroke-width="2"/>
      <text x="475" y="135" font-size="9" font-weight="bold" fill="#0f4c81" text-anchor="middle">InferenceEngine</text>
      <text x="475" y="148" font-size="7" fill="#4a5670" text-anchor="middle">direct→default</text>

      <line x1="110" y1="90" x2="138" y2="50" stroke="#0f4c81" stroke-width="1.2" marker-end="url(#arrow-infer)"/>
      <line x1="110" y1="90" x2="138" y2="120" stroke="#0f4c81" stroke-width="1.2" marker-end="url(#arrow-infer)"/>
      <line x1="250" y1="50" x2="278" y2="85" stroke="#2e7d32" stroke-width="1.2" marker-end="url(#arrow-infer)"/>
      <line x1="250" y1="120" x2="278" y2="100" stroke="#2e7d32" stroke-width="1.2" marker-end="url(#arrow-infer)"/>
      <line x1="390" y1="90" x2="418" y2="70" stroke="#0f4c81" stroke-width="1" marker-end="url(#arrow-infer)"/>
      <line x1="390" y1="100" x2="418" y2="130" stroke="#0f4c81" stroke-width="1" marker-end="url(#arrow-infer)"/>
    </svg>
    <p class="diagram-caption">Selection is deterministic: EngineAPI chooses a path from relation type, Reasoner runs geometric scoring in parallel, and optional validation/bias controls can be layered on top.</p>
  </div>

  <div class="footer-nav">
    <a href="learning.html">← Learning</a> ·
    <a href="reasoning.html">Reasoning →</a>
  </div>
  </div>
  <script src="../reference/nav2.js"></script>
</body>
</html>
