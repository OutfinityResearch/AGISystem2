<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Custom Verbs – Sys2DSL</title>
  <link rel="stylesheet" href="../reference/style.css">
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>Defining Custom Relations (Verbs)</h1>
    <div class="sub-nav">
      <strong>Syntax Topics:</strong>
      <a href="syntax_scripts.html">Sys2DSL</a> ·
      <a href="dimensions.html">Dimensions</a> ·
      <a href="relations.html">Relations</a> ·
      <a href="custom_verbs.html">Custom Verbs</a> ·
      <a href="metacognition.html">Metacognition</a>
    </div>
  </div>

  <article>
    <div class="philosophical-introduction">
      <p>While AGISystem2 provides a rich set of <a href="relations.html">built-in relations</a>, you can define <strong>custom verbs</strong> tailored to your domain. Custom relations become first-class citizens of the conceptual space – they receive their own permutation encoding and can be used identically to built-in relations.</p>
    </div>

    <h2>Basic Syntax: DEFINE_RELATION</h2>
    <p>Use the <code>DEFINE_RELATION</code> verb in triple form to create a new verb:</p>

    <pre><code>@relDef RelationName DEFINE_RELATION properties</code></pre>

    <h3>Parameters</h3>
    <table class="table-concept-index">
      <tr>
        <th>Parameter</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
      <tr>
        <td><code>RelationName</code></td>
        <td>Required</td>
        <td>The relation name in subject position (ALL_CAPS convention)</td>
      </tr>
      <tr>
        <td><code>properties</code></td>
        <td>Optional</td>
        <td>Property specification (for example <code>symmetric</code>, <code>transitive</code>, or an inverse marker)</td>
      </tr>
    </table>

    <h2>Examples</h2>

    <h3>Simple Relation</h3>
    <pre><code># Define a temperature relation (properties kept simple here)
@r1 BOILS_AT DEFINE_RELATION any

# Use it
@_ Water BOILS_AT Celsius100
@_ Alcohol BOILS_AT Celsius78</code></pre>

    <h3>Relation with Inverse</h3>
    <pre><code># Define a bidirectional relation pair
@r1 TEACHES DEFINE_RELATION any
@r2 TAUGHT_BY DEFINE_RELATION any

# Now both work
@_ Alice TEACHES Math
@_ Math TAUGHT_BY Alice  # Equivalent</code></pre>

    <h3>Symmetric Relation</h3>
    <pre><code># Define a symmetric relation (both directions are identical)
@r1 COLLABORATES_WITH DEFINE_RELATION any

# One assertion implies both
@_ Alice COLLABORATES_WITH Bob
# Automatically: Bob COLLABORATES_WITH Alice</code></pre>

    <h3>Transitive Relation</h3>
    <pre><code># Define a transitive relation
@r1 ANCESTOR_OF DEFINE_RELATION any

# Chain inference
@_ Adam ANCESTOR_OF Seth
@_ Seth ANCESTOR_OF Enos

# Query works via transitivity
@q1 Adam ANCESTOR_OF Enos  # TRUE</code></pre>

    <h3>Combined Properties</h3>
    <pre><code># Symmetric AND transitive (equivalence relation)
@r1 SAME_GROUP_AS DEFINE_RELATION any

# If A=B and B=C, then A=C, and all combinations
@_ Alice SAME_GROUP_AS Bob
@_ Bob SAME_GROUP_AS Carol

@q1 Carol SAME_GROUP_AS Alice  # TRUE</code></pre>

    <h2>The Geometric Model: Values as Separate Concepts</h2>

    <div class="philosophical-implications">
      <p><strong>Critical principle:</strong> In AGISystem2, every entity is a point (or region) in conceptual space. This means <strong>values must be separate concepts</strong>, not embedded in relation arguments.</p>

      <h3>❌ WRONG: Compressed Syntax</h3>
      <pre><code># This is FORBIDDEN - property=value compresses multiple points
@_ Water HAS_PROPERTY boiling_point_100</code></pre>

      <p>This syntax hides three separate points:</p>
      <ol>
        <li><code>Water</code> – a concept point</li>
        <li><code>boiling_point</code> – another concept point</li>
        <li><code>100</code> (or <code>Celsius100</code>) – yet another concept point</li>
      </ol>

      <h3>✓ CORRECT: Decomposed Relations</h3>

      <h4>Pattern A: Direct Relation with Value Concept</h4>
      <pre><code># Define a specific relation for the property
@r1 BOILS_AT DEFINE_RELATION BOILING_POINT_OF

# The value is a first-class concept
@_ Celsius100 IS_A temperature
@_ Celsius100 IS_A high_temperature

# Now use the direct relation
@_ Water BOILS_AT Celsius100</code></pre>

      <h4>Pattern B: Property Chain</h4>
      <pre><code># Explicit chain of relations
@_ Water HAS_PROPERTY boiling_point
@_ WaterBoilingPoint HAS_VALUE Celsius100
@_ WaterBoilingPoint PROPERTY_OF Water</code></pre>

      <h4>Pattern C: Reified Fact</h4>
      <pre><code># Create a fact node for complex properties
@fact WaterBoilingFact IS_A fact
@f1 WaterBoilingFact HAS_SUBJECT Water
@f2 WaterBoilingFact HAS_PROPERTY boiling_point
@f3 WaterBoilingFact HAS_VALUE Celsius100
@f4 WaterBoilingFact HAS_CONDITION SeaLevelPressure</code></pre>
    </div>

    <h2>Domain-Specific Relation Sets</h2>

    <h3>Temperature Domain</h3>
    <pre><code># Define temperature relations
@r1 BOILS_AT DEFINE_RELATION any
@r2 FREEZES_AT DEFINE_RELATION any
@r3 MELTS_AT DEFINE_RELATION any

# Define value concepts
@_ Celsius0 IS_A temperature
@_ Celsius100 IS_A temperature
@_ Celsius0 IS_A freezing_temperature
@_ Celsius100 IS_A boiling_temperature

# Use relations
@_ Water BOILS_AT Celsius100
@_ Water FREEZES_AT Celsius0
@_ Iron MELTS_AT Celsius1538</code></pre>

    <h3>Employment Domain</h3>
    <pre><code># Define employment relations
@r1 WORKS_AT DEFINE_RELATION any
@r2 MANAGES DEFINE_RELATION any
@r3 REPORTS_TO DEFINE_RELATION any

# Use them
@_ Alice WORKS_AT TechCorp
@_ Bob WORKS_AT Engineering
@_ Charlie REPORTS_TO Bob
@_ Bob REPORTS_TO Alice

# Transitive query
@q1 Charlie REPORTS_TO Alice  # TRUE</code></pre>

    <h3>Medical Domain</h3>
    <pre><code># Define medical relations
@r1 TREATS DEFINE_RELATION any
@r2 SYMPTOM_OF DEFINE_RELATION any
@r3 CONTRAINDICATED_WITH DEFINE_RELATION any

# Use them
@_ Aspirin TREATS Headache
@_ Fever SYMPTOM_OF Infection
@_ DrugA CONTRAINDICATED_WITH DrugB</code></pre>

    <h2>Querying Custom Relations</h2>
    <p>Custom relations work with all triple-based query verbs:</p>

    <pre><code># Direct query
@q1 Water BOILS_AT Celsius100

# Pattern matching
@temps any FACTS BOILS_AT
@waterFacts Water FACTS any

# With masks (see Sys2DSL_commands_queries_masks)
@mask Temperature_Mass MASK any
@q2 Water FREEZES_AT Celsius0</code></pre>

    <h2>Relation Introspection</h2>
    <p>Query information about relations using the standard concept/inspection verbs:</p>

    <pre><code># Get relation properties as a point
@rel BOILS_AT BIND_RELATION any
@info $rel INSPECT any

# List all registered relations via theory or storage APIs
@rels any THEORIES any   # See Sys2DSL_commands_util_output_ontology for ontology introspection</code></pre>

    <h2>Best Practices</h2>

    <h3>Naming Conventions</h3>
    <ul>
      <li>Use ALL_CAPS for relation names: <code>BOILS_AT</code>, <code>TEACHES</code></li>
      <li>Use verb phrases: <code>WORKS_AT</code> not <code>WORKPLACE</code></li>
      <li>Name inverses consistently: <code>TEACHES</code> / <code>TAUGHT_BY</code></li>
    </ul>

    <h3>Value Concepts</h3>
    <ul>
      <li>Create explicit concepts for values: <code>Celsius100</code>, <code>Kilogram50</code></li>
      <li>Place values in hierarchies: <code>Celsius100 IS_A high_temperature</code></li>
      <li>Never embed values in tokens: <code>temp=100</code> is <strong>forbidden</strong></li>
    </ul>

    <h3>Relation Design</h3>
    <ul>
      <li>Define inverses for bidirectional navigation</li>
      <li>Use <code>transitive</code> sparingly – it increases inference complexity</li>
      <li>Group domain relations in theory files for reuse</li>
    </ul>

    <h2>Technical References</h2>
    <ul>
      <li><a href="../specsLoader.html?spec=theory/dsl_engine.js.md">DS(/theory/dsl_engine.js)</a> – DEFINE_RELATION implementation</li>
      <li><a href="../specsLoader.html?spec=core/relation_permuter.js.md">DS(/core/relation_permuter.js)</a> – Permutation generation</li>
      <li><a href="../specsLoader.html?spec=theory/Sys2DSL_geometric_model.md">DS(/theory/Sys2DSL_geometric_model)</a> – Why property=value is forbidden</li>
      <li><a href="relations.html">Built-in Relations</a> – Reference for standard relations</li>
    </ul>
  </article>

  <div class="footer-nav">
    <a href="index.html">Back to Syntax overview</a>
    <a href="../index.html">Back to index</a>
  </div>
  </div>
  <script src="../reference/nav2.js"></script>
</body>
</html>
