<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Metric-Affine HDC - Theory - AGISystem2</title>
  <link rel="stylesheet" href="../../reference/style.css">
  <style>
    .diagram-container { margin: 20px 0; }
    .concept-box {
      background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
      border-left: 4px solid #ff9800;
      padding: 20px;
      margin: 20px 0;
      border-radius: 0 8px 8px 0;
    }
    .concept-box h4 { margin-top: 0; color: #e65100; }
    .math-block {
      background: #263238;
      color: #ffcc80;
      padding: 20px;
      border-radius: 8px;
      font-family: monospace;
      overflow-x: auto;
      margin: 15px 0;
    }
    .definition {
      background: #fce4ec;
      border: 1px solid #f48fb1;
      padding: 15px 20px;
      border-radius: 8px;
      margin: 15px 0;
    }
    .definition strong { color: #c2185b; }
    .example-box {
      background: #e8f5e9;
      border: 1px solid #81c784;
      padding: 15px 20px;
      border-radius: 8px;
      margin: 15px 0;
    }
    .intuition {
      background: #e3f2fd;
      border-left: 4px solid #1976d2;
      padding: 15px 20px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }
    .intuition em { color: #1565c0; font-style: normal; font-weight: bold; }
    .warning-box {
      background: #fff8e1;
      border: 1px solid #ffc107;
      padding: 15px 20px;
      border-radius: 8px;
      margin: 15px 0;
    }
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    .comparison-table th, .comparison-table td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: center;
    }
    .comparison-table th {
      background: #ff9800;
      color: white;
    }
    .comparison-table tr:nth-child(even) {
      background: #fff3e0;
    }
    .byte-visual {
      font-family: monospace;
      font-size: 12px;
    }
    .byte-cell {
      display: inline-block;
      width: 24px;
      height: 24px;
      line-height: 24px;
      text-align: center;
      margin: 1px;
      border-radius: 3px;
      font-size: 10px;
    }
  </style>
</head>
<body>
  <div class="page">
	  <div class="nav-header">
	    <h1>Metric-Affine HDC</h1>
    <small>
      <a href="../../index.html">Home</a> &middot;
      <a href="../index.html">Theory</a> &middot;
      <a href="dense-binary.html">Dense-Binary</a> &middot;
      <a href="sparse-polynomial.html">SPHDC</a> &middot;
      <a href="metric-affine.html"><strong>Metric-Affine</strong></a> &middot;
      <a href="metric-affine-elastic.html">Metric-Affine Elastic</a> &middot;
      <a href="exact.html">EXACT</a>
	    </small>
	    <small>Fuzzy-Boolean Hyper-Lattice: Continuous HDC in D Bytes (default D=32)</small>
	  </div>

	  <div class="section-intro">
	    <p>Metric-Affine HDC represents concepts as <strong>D-byte vectors over Z₂₅₆</strong> (integers 0-255). In AGISystem2, <strong>geometry = D</strong> (the number of byte channels per vector). The default is <strong>D=32</strong>, and this page illustrates that default configuration.</p>
	  </div>

  <h2>1. The Core Idea: Continuous Values in Compact Space</h2>

	  <div class="concept-box">
	    <h4>Fundamental Insight</h4>
	    <p>Instead of thousands of binary bits, Metric-Affine uses just <strong>D byte channels</strong> (default D=32). Each channel is a byte (0-255), so the storage is <strong>D bytes = 8D bits</strong>. The continuous values enable <em>fuzzy superposition</em> where bundled concepts smoothly blend rather than voting discretely.</p>
	  </div>

	  <div class="definition">
	    <strong>Definition: Metric-Affine Vector</strong>
	    <p>A metric-affine vector V is a fixed-length sequence of bytes:</p>
	    <p style="text-align: center; font-family: monospace; font-size: 14px;">
	      V = [b<sub>0</sub>, b<sub>1</sub>, ..., b<sub>D-1</sub>] where b<sub>i</sub> &isin; {0, 1, ..., 255}
	    </p>
	    <p>Storage: D bytes (default 32 bytes = 256 bits).</p>
	  </div>

  <div class="diagram-container">
	    <svg viewBox="0 0 800 160" xmlns="http://www.w3.org/2000/svg" style="width: 100%; max-width: 800px;">
	      <!-- Title -->
	      <text x="400" y="25" text-anchor="middle" font-weight="bold" font-size="14" fill="#ff9800">Metric-Affine Vector Structure (example at D=32 bytes)</text>

      <!-- Main vector bar -->
      <rect x="50" y="40" width="700" height="50" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>

      <!-- Byte cells visualization -->
      <g font-family="monospace" font-size="10">
        <rect x="60" y="50" width="35" height="30" fill="#ff9800" rx="3"/>
        <text x="77" y="70" text-anchor="middle" fill="white">180</text>

        <rect x="100" y="50" width="35" height="30" fill="#ffb74d" rx="3"/>
        <text x="117" y="70" text-anchor="middle" fill="#333">45</text>

        <rect x="140" y="50" width="35" height="30" fill="#ff9800" rx="3"/>
        <text x="157" y="70" text-anchor="middle" fill="white">230</text>

        <rect x="180" y="50" width="35" height="30" fill="#ffe0b2" rx="3"/>
        <text x="197" y="70" text-anchor="middle" fill="#333">12</text>

        <rect x="220" y="50" width="35" height="30" fill="#ffcc80" rx="3"/>
        <text x="237" y="70" text-anchor="middle" fill="#333">128</text>

        <rect x="260" y="50" width="35" height="30" fill="#ff9800" rx="3"/>
        <text x="277" y="70" text-anchor="middle" fill="white">200</text>

        <text x="320" y="70" fill="#666" font-size="16">. . .</text>

        <rect x="680" y="50" width="35" height="30" fill="#ffb74d" rx="3"/>
        <text x="697" y="70" text-anchor="middle" fill="#333">92</text>

        <rect x="720" y="50" width="25" height="30" fill="#ffe0b2" rx="3"/>
        <text x="732" y="70" text-anchor="middle" fill="#333" font-size="9">15</text>
      </g>

      <!-- Labels -->
      <text x="77" y="100" text-anchor="middle" font-size="9" fill="#666">byte 0</text>
      <text x="710" y="100" text-anchor="middle" font-size="9" fill="#666">byte 31</text>

	      <!-- Memory layout -->
	      <rect x="50" y="115" width="700" height="35" rx="5" fill="#f5f5f5" stroke="#ddd"/>
	      <text x="400" y="135" text-anchor="middle" font-weight="bold" font-size="11">Storage: Uint8Array(D) (example shown at D=32 → 32 bytes)</text>
	      <text x="400" y="147" text-anchor="middle" font-size="10" fill="#666">8x smaller than Dense-Binary (4KB) with continuous values</text>
	    </svg>
	  </div>

  <h2>2. The Shifted Baseline: Why 0.67, Not 0.5</h2>

  <p>Unlike binary HDC where random vectors share ~50% of bits, metric-affine vectors have a different baseline.</p>

	  <div class="definition">
	    <strong>Theorem: Metric-Affine Baseline Similarity</strong>
	    <p>For random vectors X, Y with each byte uniformly distributed over [0, 255]:</p>
	    <ul>
	      <li>Expected absolute difference per byte: E[|X<sub>i</sub> - Y<sub>i</sub>|] &asymp; 85.33</li>
	      <li>Expected L<sub>1</sub> distance: D &times; 85.33</li>
	      <li>Maximum L<sub>1</sub> distance: D &times; 255</li>
	      <li><strong>Expected similarity: 1 - (D &times; 85.33)/(D &times; 255) &asymp; 0.665</strong></li>
	    </ul>
	  </div>

  <div class="warning-box">
    <strong>Important:</strong> Because the baseline is ~0.67 instead of 0.5, all similarity thresholds must be adjusted. A "good match" in metric-affine is ~0.75+, whereas in dense-binary it would be ~0.55+.
  </div>

  <div class="diagram-container">
    <svg viewBox="0 0 700 180" xmlns="http://www.w3.org/2000/svg" style="width: 100%; max-width: 700px;">
      <!-- Title -->
      <text x="350" y="25" text-anchor="middle" font-weight="bold" font-size="12" fill="#ff9800">Similarity Distribution Comparison</text>

      <!-- Axes -->
      <line x1="80" y1="130" x2="620" y2="130" stroke="#333" stroke-width="2"/>

      <!-- Dense-binary curve (blue) -->
      <path d="M200 128 Q280 128 320 100 Q360 50 400 25 Q440 50 480 100 Q520 128 600 128" fill="none" stroke="#1976d2" stroke-width="3"/>
      <text x="400" y="18" text-anchor="middle" font-size="9" fill="#1976d2">Dense-Binary (0.5)</text>

      <!-- Metric-affine curve (orange) -->
      <path d="M280 128 Q360 128 420 100 Q480 50 520 25 Q560 50 600 100 Q620 128 650 128" fill="none" stroke="#ff9800" stroke-width="3"/>
      <text x="520" y="18" text-anchor="middle" font-size="9" fill="#ff9800">Metric-Affine (0.67)</text>

      <!-- Labels -->
      <text x="80" y="150" font-size="10" fill="#666">0.0</text>
      <text x="260" y="150" font-size="10" fill="#666">0.33</text>
      <text x="400" y="150" font-size="10" fill="#1976d2" font-weight="bold">0.5</text>
      <text x="510" y="150" font-size="10" fill="#ff9800" font-weight="bold">0.67</text>
      <text x="620" y="150" font-size="10" fill="#666">1.0</text>

      <!-- Mean markers -->
      <line x1="400" y1="25" x2="400" y2="130" stroke="#1976d2" stroke-width="2" stroke-dasharray="5,5"/>
      <line x1="510" y1="25" x2="510" y2="130" stroke="#ff9800" stroke-width="2" stroke-dasharray="5,5"/>

      <!-- Legend -->
      <rect x="150" y="160" width="15" height="10" fill="#1976d2"/>
      <text x="170" y="168" font-size="9" fill="#333">Dense-Binary baseline</text>
      <rect x="350" y="160" width="15" height="10" fill="#ff9800"/>
      <text x="370" y="168" font-size="9" fill="#333">Metric-Affine baseline</text>
    </svg>
  </div>

  <h2>3. Binding: BIND (XOR on Bytes)</h2>

  <p>Metric-Affine implements BIND as byte-wise XOR.</p>

  <div class="definition">
    <strong>Definition: BIND (byte-wise XOR)</strong>
    <p>Given vectors A and B, their binding BIND(A, B) is computed byte-by-byte:</p>
    <p style="text-align: center; font-family: monospace; font-size: 14px;">
      BIND(A, B)<sub>i</sub> = A<sub>i</sub> XOR B<sub>i</sub>
    </p>
  </div>

  <div class="diagram-container">
    <svg viewBox="0 0 750 200" xmlns="http://www.w3.org/2000/svg" style="width: 100%; max-width: 750px;">
      <!-- Vector A -->
      <rect x="50" y="30" width="280" height="45" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
      <text x="70" y="48" font-size="10" fill="#e65100" font-weight="bold">A:</text>
      <g font-family="monospace" font-size="11">
        <text x="95" y="60" fill="#333">180</text>
        <text x="135" y="60" fill="#333">45</text>
        <text x="170" y="60" fill="#333">230</text>
        <text x="210" y="60" fill="#333">12</text>
        <text x="280" y="60" fill="#666">...</text>
      </g>

      <!-- Vector B -->
      <rect x="50" y="85" width="280" height="45" rx="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
      <text x="70" y="103" font-size="10" fill="#2e7d32" font-weight="bold">B:</text>
      <g font-family="monospace" font-size="11">
        <text x="95" y="115" fill="#333">92</text>
        <text x="133" y="115" fill="#333">200</text>
        <text x="173" y="115" fill="#333">15</text>
        <text x="208" y="115" fill="#333">128</text>
        <text x="280" y="115" fill="#666">...</text>
      </g>

      <!-- XOR symbol -->
      <circle cx="400" cy="80" r="30" fill="#fce4ec" stroke="#e91e63" stroke-width="3"/>
      <text x="400" y="75" text-anchor="middle" font-weight="bold" font-size="14" fill="#c2185b">XOR</text>
      <text x="400" y="92" text-anchor="middle" font-size="10" fill="#c2185b">(XOR)</text>

      <!-- Result -->
      <rect x="470" y="57" width="250" height="45" rx="5" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
      <text x="490" y="75" font-size="10" fill="#c2185b" font-weight="bold">BIND(A, B):</text>
      <g font-family="monospace" font-size="11">
        <text x="535" y="87" fill="#333">232</text>
        <text x="575" y="87" fill="#333">245</text>
        <text x="615" y="87" fill="#333">241</text>
        <text x="655" y="87" fill="#333">132</text>
        <text x="700" y="87" fill="#666">...</text>
      </g>

      <!-- Byte-by-byte explanation -->
      <g font-size="9" fill="#666">
        <text x="105" y="150" text-anchor="middle">180 XOR 92</text>
        <text x="105" y="165" text-anchor="middle">= 232</text>
        <text x="175" y="150" text-anchor="middle">45 XOR 200</text>
        <text x="175" y="165" text-anchor="middle">= 245</text>
        <text x="245" y="150" text-anchor="middle">230 XOR 15</text>
        <text x="245" y="165" text-anchor="middle">= 241</text>
      </g>

      <!-- Properties box -->
      <rect x="50" y="175" width="670" height="20" rx="5" fill="#f5f5f5" stroke="#ddd"/>
      <text x="385" y="189" text-anchor="middle" font-size="10" fill="#333">
        Same algebraic properties as Dense-Binary: Commutative, Associative, XOR cancellation
      </text>
    </svg>
  </div>

  <h2>4. Bundling: Arithmetic Mean</h2>

  <p>Unlike binary majority vote, metric-affine uses <strong>arithmetic mean</strong> for bundling.</p>

  <div class="definition">
    <strong>Definition: Arithmetic Mean Bundling</strong>
    <p>Given vectors V<sub>1</sub>, V<sub>2</sub>, ..., V<sub>k</sub>, their bundle is:</p>
    <p style="text-align: center; font-family: monospace; font-size: 14px;">
      bundle(V<sub>1</sub>...V<sub>k</sub>)<sub>i</sub> = round((V<sub>1,i</sub> + V<sub>2,i</sub> + ... + V<sub>k,i</sub>) / k)
    </p>
    <p>Result is clamped to [0, 255].</p>
  </div>

  <div class="intuition">
    <em>Intuition:</em> The bundle is a "smooth blend" of all inputs. Unlike binary majority vote (all-or-nothing per bit), arithmetic mean creates a continuous interpolation. The result lies geometrically between all inputs in the space.
  </div>

  <div class="diagram-container">
    <svg viewBox="0 0 750 260" xmlns="http://www.w3.org/2000/svg" style="width: 100%; max-width: 750px;">
      <!-- Title -->
      <text x="375" y="25" text-anchor="middle" font-weight="bold" font-size="12" fill="#9c27b0">Arithmetic Mean Bundling</text>

      <!-- Input vectors -->
      <rect x="50" y="40" width="220" height="35" rx="4" fill="#fff3e0" stroke="#ff9800"/>
      <text x="70" y="62" font-size="10" fill="#e65100" font-weight="bold">A:</text>
      <text x="100" y="62" font-family="monospace" font-size="11" fill="#333">180  45 230  12</text>

      <rect x="50" y="80" width="220" height="35" rx="4" fill="#e8f5e9" stroke="#4caf50"/>
      <text x="70" y="102" font-size="10" fill="#2e7d32" font-weight="bold">B:</text>
      <text x="100" y="102" font-family="monospace" font-size="11" fill="#333">175  52 225  18</text>

      <rect x="50" y="120" width="220" height="35" rx="4" fill="#e3f2fd" stroke="#1976d2"/>
      <text x="70" y="142" font-size="10" fill="#1565c0" font-weight="bold">C:</text>
      <text x="100" y="142" font-family="monospace" font-size="11" fill="#333"> 50 200  40 190</text>

      <!-- Mean operation -->
      <circle cx="350" cy="95" r="35" fill="#f3e5f5" stroke="#9c27b0" stroke-width="3"/>
      <text x="350" y="90" text-anchor="middle" font-weight="bold" font-size="11" fill="#7b1fa2">MEAN</text>
      <text x="350" y="105" text-anchor="middle" font-size="9" fill="#7b1fa2">average</text>

      <!-- Result -->
      <rect x="440" y="77" width="260" height="35" rx="4" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
      <text x="460" y="99" font-size="10" fill="#c2185b" font-weight="bold">Result:</text>
      <text x="515" y="99" font-family="monospace" font-size="11" fill="#333">135  99 165  73</text>

      <!-- Calculation breakdown -->
      <rect x="50" y="170" width="650" height="80" rx="5" fill="#f5f5f5" stroke="#ddd"/>
      <text x="375" y="190" text-anchor="middle" font-weight="bold" font-size="11">Byte-by-Byte Averaging:</text>

      <g font-size="10">
        <text x="120" y="215" text-anchor="middle" fill="#333">Byte 0:</text>
        <text x="120" y="230" text-anchor="middle" fill="#666">(180+175+50)/3</text>
        <text x="120" y="245" text-anchor="middle" fill="#2e7d32" font-weight="bold">= 135</text>

        <text x="270" y="215" text-anchor="middle" fill="#333">Byte 1:</text>
        <text x="270" y="230" text-anchor="middle" fill="#666">(45+52+200)/3</text>
        <text x="270" y="245" text-anchor="middle" fill="#2e7d32" font-weight="bold">= 99</text>

        <text x="420" y="215" text-anchor="middle" fill="#333">Byte 2:</text>
        <text x="420" y="230" text-anchor="middle" fill="#666">(230+225+40)/3</text>
        <text x="420" y="245" text-anchor="middle" fill="#2e7d32" font-weight="bold">= 165</text>

        <text x="570" y="215" text-anchor="middle" fill="#333">Byte 3:</text>
        <text x="570" y="230" text-anchor="middle" fill="#666">(12+18+190)/3</text>
        <text x="570" y="245" text-anchor="middle" fill="#2e7d32" font-weight="bold">= 73</text>
      </g>
    </svg>
  </div>

  <div class="warning-box">
    <strong>Gray Convergence Warning:</strong> Unlike binary majority vote, arithmetic mean causes values to drift toward the middle (128) over repeated bundling operations. Deep nested bundling can lose concept distinctiveness.
  </div>

  <h2>5. Similarity: Manhattan (L<sub>1</sub>) Distance</h2>

  <div class="definition">
    <strong>Definition: Normalized L<sub>1</sub> Similarity</strong>
    <p style="text-align: center; font-family: monospace; font-size: 16px;">
      sim(A, B) = 1 - (&Sigma;|A<sub>i</sub> - B<sub>i</sub>|) / (32 &times; 255)
    </p>
    <p>The sum of absolute byte differences, normalized to [0, 1].</p>
  </div>

  <div class="diagram-container">
    <svg viewBox="0 0 700 130" xmlns="http://www.w3.org/2000/svg" style="width: 100%; max-width: 700px;">
      <!-- Similarity scale -->
      <rect x="50" y="30" width="600" height="50" rx="8" fill="url(#maScale)" stroke="#333" stroke-width="2"/>

      <!-- Labels -->
      <text x="50" y="100" text-anchor="middle" font-size="10" fill="#c62828">0.0</text>
      <text x="50" y="115" text-anchor="middle" font-size="9" fill="#666">Inverse</text>

      <text x="170" y="100" text-anchor="middle" font-size="10" fill="#ff9800">0.33</text>
      <text x="170" y="115" text-anchor="middle" font-size="9" fill="#666">Very different</text>

      <text x="400" y="100" text-anchor="middle" font-size="10" fill="#ff9800" font-weight="bold">0.67</text>
      <text x="400" y="115" text-anchor="middle" font-size="9" fill="#666">Random/Unrelated</text>

      <text x="530" y="100" text-anchor="middle" font-size="10" fill="#2e7d32">0.80</text>
      <text x="530" y="115" text-anchor="middle" font-size="9" fill="#666">Related</text>

      <text x="650" y="100" text-anchor="middle" font-size="10" fill="#2e7d32">1.0</text>
      <text x="650" y="115" text-anchor="middle" font-size="9" fill="#666">Identical</text>

      <!-- 0.67 marker -->
      <line x1="400" y1="30" x2="400" y2="80" stroke="#e65100" stroke-width="3"/>

      <defs>
        <linearGradient id="maScale" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:#f44336"/>
          <stop offset="20%" style="stop-color:#ff9800"/>
          <stop offset="55%" style="stop-color:#ffeb3b"/>
          <stop offset="80%" style="stop-color:#8bc34a"/>
          <stop offset="100%" style="stop-color:#4caf50"/>
        </linearGradient>
      </defs>
    </svg>
  </div>

  <h2>6. Strategy Comparison</h2>

	  <table class="comparison-table">
    <tr>
      <th>Property</th>
      <th>Dense-Binary</th>
      <th>SPHDC</th>
      <th>Metric-Affine</th>
    </tr>
	    <tr>
	      <td><strong>Memory</strong></td>
	      <td>4 KB</td>
	      <td>k-sparse (varies)</td>
	      <td>D bytes (default 32)</td>
	    </tr>
    <tr>
      <td><strong>Values</strong></td>
      <td>Binary {0, 1}</td>
      <td>BigInt exponents</td>
      <td>Bytes {0..255}</td>
    </tr>
    <tr>
      <td><strong>Bind</strong></td>
      <td>XOR bitwise</td>
      <td>Cartesian XOR</td>
      <td>XOR byte-wise</td>
    </tr>
    <tr>
      <td><strong>Bundle</strong></td>
      <td>Majority vote</td>
      <td>Set union</td>
      <td>Arithmetic mean</td>
    </tr>
    <tr>
      <td><strong>Similarity</strong></td>
      <td>Hamming</td>
      <td>Jaccard</td>
      <td>L<sub>1</sub> Manhattan</td>
    </tr>
    <tr>
      <td><strong>Baseline</strong></td>
      <td>0.5</td>
      <td>~0.01</td>
      <td>~0.67</td>
    </tr>
    <tr>
      <td><strong>Holographic</strong></td>
      <td>Yes (classic)</td>
      <td>Limited</td>
      <td>Yes (fuzzy)</td>
    </tr>
    <tr>
      <td><strong>Best For</strong></td>
      <td>General HDC</td>
      <td>Symbolic only</td>
      <td>Fuzzy reasoning</td>
    </tr>
  </table>

  <h2>7. Use Cases</h2>

	  <div class="concept-box">
	    <h4>Ideal Applications</h4>
	    <ul>
	      <li><strong>Embedded Systems:</strong> D bytes per vector (default 32) is highly efficient</li>
	      <li><strong>Fuzzy Reasoning:</strong> Continuous values enable graded similarity</li>
	      <li><strong>Compact Holography:</strong> When full HRR resolution is overkill</li>
	      <li><strong>Privacy-Sensitive:</strong> Smaller vectors expose less information</li>
	    </ul>
	  </div>

  <div class="warning-box">
    <strong>Limitations:</strong>
    <ul>
      <li>Lower bundle capacity (~50 concepts) due to gray convergence</li>
      <li>Higher baseline means less discrimination between "related" and "unrelated"</li>
      <li>Not suitable for very deep transitive reasoning chains</li>
    </ul>
  </div>

  <h2>8. Usage</h2>

	  <div class="example-box">
	    <strong>Programmatic Usage</strong>
	    <pre style="margin: 10px 0;">
	import { initHDC, setDefaultGeometry } from './src/hdc/facade.mjs';
	import { Session } from './src/runtime/session.mjs';

	// Initialize metric-affine strategy
	initHDC('metric-affine');
	setDefaultGeometry(32); // D in bytes (try 8/16/32/64/128)

	// Create session
	const session = new Session({ geometry: 32 }); // D in bytes

// Learn facts
session.learn('isA Dog Animal');
session.learn('isA Cat Animal');

// Query
const result = session.query('isA Dog ?what');
console.log(result);  // { success: true, bindings: { ?what: 'Animal' } }</pre>
  </div>

  <div class="example-box">
    <strong>Environment Variable</strong>
    <pre style="margin: 10px 0;">
export SYS2_HDC_STRATEGY=metric-affine
node your-script.js</pre>
  </div>

	  <div class="warning-box">
	    <strong>Need better scaling for large KBs?</strong>
	    <p>Metric-Affine Elastic (EMA) extends this strategy with <strong>chunked bundling</strong> (bounded depth) to reduce gray drift under large superpositions. Geometry (D bytes) remains a manual tuning knob in both strategies. <a href="metric-affine-elastic.html">Read the EMA theory page &rarr;</a></p>
	  </div>

  <h2>9. Mathematical Properties</h2>

	  <div class="concept-box">
	    <h4>Key Properties of Metric-Affine HDC</h4>
	    <ul>
      <li><strong>Perfect XOR cancellation:</strong> BIND(BIND(A, B), B) = A exactly</li>
      <li><strong>Commutativity:</strong> BIND(A, B) = BIND(B, A)</li>
      <li><strong>Associativity:</strong> BIND(BIND(A, B), C) = BIND(A, BIND(B, C))</li>
      <li><strong>Continuous Bundling:</strong> Smooth interpolation between concepts</li>
	      <li><strong>Compact Storage:</strong> D bytes regardless of complexity (default 32)</li>
	      <li><strong>Shifted Baseline:</strong> ~0.67 for random (requires threshold adjustment)</li>
	    </ul>
	  </div>

  <div class="footer-nav">
    <p>
      <a href="../index.html">&larr; Back to Theory</a> &middot;
      <a href="dense-binary.html">Dense-Binary Strategy</a> &middot;
      <a href="sparse-polynomial.html">SPHDC Strategy</a> &middot;
      <a href="metric-affine-elastic.html">Metric-Affine Elastic Strategy</a> &middot;
      <a href="../../specsLoader.html?spec=DS/DS18-Metric-Affine-HDC.md">DS18 Specification &rarr;</a>
    </p>
  </div>
  </div>
</body>
</html>
