<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Validation</title>
  <link rel="stylesheet" href="../reference/style.css">
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>AGISystem2 – Validation</h1>
    <small>
      <a href="../index.html">Home</a> ·
      <a href="../guides/conceptual_spaces.html">Theory</a> ·
      <a href="../architecture/index.html">Architecture</a> ·
      <a href="../api/index.html">APIs</a> ·
      <a href="../syntax/index.html">Syntax</a> ·
      <a href="../usage-cli/index.html">CLI</a> ·
      <a href="index.html">Wiki</a> ·
      <a href="../specs/matrix.html">Specs</a>
    </small>
  </div>

  <p>Validation in AGISystem2 is the process of verifying that knowledge and reasoning results satisfy consistency constraints. The <a href="../architecture/reasoning.html">ValidationEngine</a> performs checks at multiple levels: individual assertions, reasoning chains, and global theory coherence.</p>

  <div class="diagram">
    <svg viewBox="0 0 560 320" role="img" aria-label="Validation pipeline">
      <defs>
        <marker id="arrow-val" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
          <path d="M0,0 L6,3 L0,6 z" fill="#0f4c81" />
        </marker>
        <marker id="arrow-fail" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
          <path d="M0,0 L6,3 L0,6 z" fill="#c62828" />
        </marker>
      </defs>

      <!-- Background -->
      <rect x="0" y="0" width="560" height="320" fill="#fafbfc"/>

      <!-- Input -->
      <rect x="20" y="30" width="100" height="50" rx="4" fill="#e1ecf7" stroke="#0f4c81" stroke-width="2"/>
      <text x="70" y="50" font-size="9" font-weight="bold" fill="#0f4c81" text-anchor="middle">Input</text>
      <text x="70" y="65" font-size="8" fill="#4a5670" text-anchor="middle">ASSERT / ASK</text>

      <!-- Arrow to Check 1 -->
      <line x1="125" y1="55" x2="155" y2="55" stroke="#0f4c81" stroke-width="1.5" marker-end="url(#arrow-val)"/>

      <!-- Check 1: Syntactic -->
      <rect x="160" y="20" width="110" height="70" rx="4" fill="#fff" stroke="#0f4c81" stroke-width="1"/>
      <text x="215" y="40" font-size="9" font-weight="bold" fill="#0f4c81" text-anchor="middle">1. Syntactic</text>
      <text x="215" y="55" font-size="8" fill="#4a5670" text-anchor="middle">Valid DSL syntax?</text>
      <text x="215" y="68" font-size="8" fill="#4a5670" text-anchor="middle">Concepts exist?</text>
      <text x="215" y="81" font-size="8" fill="#4a5670" text-anchor="middle">Relations defined?</text>

      <!-- Arrow to Check 2 -->
      <line x1="275" y1="55" x2="305" y2="55" stroke="#0f4c81" stroke-width="1.5" marker-end="url(#arrow-val)"/>

      <!-- Check 2: Semantic -->
      <rect x="310" y="20" width="110" height="70" rx="4" fill="#fff" stroke="#0f4c81" stroke-width="1"/>
      <text x="365" y="40" font-size="9" font-weight="bold" fill="#0f4c81" text-anchor="middle">2. Semantic</text>
      <text x="365" y="55" font-size="8" fill="#4a5670" text-anchor="middle">Dimension ranges?</text>
      <text x="365" y="68" font-size="8" fill="#4a5670" text-anchor="middle">No self-loops?</text>
      <text x="365" y="81" font-size="8" fill="#4a5670" text-anchor="middle">Type constraints?</text>

      <!-- Arrow to Check 3 -->
      <line x1="425" y1="55" x2="455" y2="55" stroke="#0f4c81" stroke-width="1.5" marker-end="url(#arrow-val)"/>

      <!-- Check 3: Consistency -->
      <rect x="460" y="20" width="80" height="70" rx="4" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2"/>
      <text x="500" y="40" font-size="9" font-weight="bold" fill="#2e7d32" text-anchor="middle">3. Consistent</text>
      <text x="500" y="55" font-size="8" fill="#4a5670" text-anchor="middle">No conflicts</text>
      <text x="500" y="68" font-size="8" fill="#4a5670" text-anchor="middle">with existing</text>
      <text x="500" y="81" font-size="8" fill="#4a5670" text-anchor="middle">knowledge</text>

      <!-- Validation levels detail -->
      <rect x="20" y="110" width="520" height="90" rx="4" fill="#f5f7fb" stroke="#b0b6c4" stroke-width="1"/>
      <text x="280" y="130" font-size="10" font-weight="bold" fill="#4a5670" text-anchor="middle">Validation Checks</text>

      <!-- Level boxes -->
      <rect x="35" y="145" width="150" height="45" rx="4" fill="#e1ecf7" stroke="#0f4c81" stroke-width="1"/>
      <text x="110" y="162" font-size="9" font-weight="bold" fill="#0f4c81" text-anchor="middle">Local (per assertion)</text>
      <text x="110" y="178" font-size="8" fill="#4a5670" text-anchor="middle">A IS_A B → A ⊆ B?</text>

      <rect x="200" y="145" width="160" height="45" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
      <text x="280" y="162" font-size="9" font-weight="bold" fill="#e65100" text-anchor="middle">Chain (reasoning path)</text>
      <text x="280" y="178" font-size="8" fill="#4a5670" text-anchor="middle">A→B→C implies A→C?</text>

      <rect x="375" y="145" width="150" height="45" rx="4" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
      <text x="450" y="162" font-size="9" font-weight="bold" fill="#2e7d32" text-anchor="middle">Global (whole theory)</text>
      <text x="450" y="178" font-size="8" fill="#4a5670" text-anchor="middle">No cycles? No orphans?</text>

      <!-- Conflict example -->
      <rect x="20" y="215" width="250" height="90" rx="4" fill="#ffebee" stroke="#c62828" stroke-width="1"/>
      <text x="145" y="235" font-size="10" font-weight="bold" fill="#c62828" text-anchor="middle">Conflict Detection</text>

      <text x="35" y="255" font-size="9" fill="#4a5670" font-family="monospace">ASSERT Dog IS_A Mammal</text>
      <text x="35" y="270" font-size="9" fill="#c62828" font-family="monospace">ASSERT Dog IS_A Fish</text>
      <text x="35" y="290" font-size="9" fill="#c62828">⚠ Mammal ∩ Fish = ∅ → CONFLICT</text>

      <!-- Pass example -->
      <rect x="290" y="215" width="250" height="90" rx="4" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
      <text x="415" y="235" font-size="10" font-weight="bold" fill="#2e7d32" text-anchor="middle">Valid Update</text>

      <text x="305" y="255" font-size="9" fill="#4a5670" font-family="monospace">ASSERT Dog IS_A Mammal</text>
      <text x="305" y="270" font-size="9" fill="#2e7d32" font-family="monospace">ASSERT Dog IS_A Animal</text>
      <text x="305" y="290" font-size="9" fill="#2e7d32">✓ Mammal ⊆ Animal → OK</text>
    </svg>
    <p class="diagram-caption">The ValidationEngine processes input through three stages: syntactic checks (valid DSL), semantic checks (valid dimensions and types), and consistency checks (no conflicts with existing knowledge). Conflicts are detected when assertions would place a concept in incompatible regions.</p>
  </div>

  <h2>What Gets Validated</h2>

  <table class="table-concept-index">
    <thead>
      <tr><th>Check Type</th><th>What It Verifies</th><th>Example Failure</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>Syntactic</td>
        <td>DSL grammar, concept names exist</td>
        <td>"UnknownConcept IS_A Animal"</td>
      </tr>
      <tr>
        <td>Dimension bounds</td>
        <td>Int8 values in [-128, +127]</td>
        <td>Property value 200 (out of range)</td>
      </tr>
      <tr>
        <td>Containment</td>
        <td>IS_A implies geometric containment</td>
        <td>Dog IS_A Fish when Mammal ∩ Fish = ∅</td>
      </tr>
      <tr>
        <td>Cycle detection</td>
        <td>No circular IS_A chains</td>
        <td>A IS_A B, B IS_A C, C IS_A A</td>
      </tr>
      <tr>
        <td>Axiological</td>
        <td>Value dimensions consistent</td>
        <td>GOOD and EVIL on same concept</td>
      </tr>
    </tbody>
  </table>

  <h2>Implementation</h2>

  <p>The <code>ValidationEngine</code> exposes three main methods:</p>

  <pre>
// Validate a single assertion before committing
const result = validationEngine.validateAssertion(assertion, context);
// result: { valid: true } or { valid: false, reason: "..." }

// Check consistency of a reasoning chain
const chainResult = validationEngine.validateChain(steps);

// Full theory consistency check
const globalResult = validationEngine.validateTheory(theoryStack);</pre>

  <p>When validation fails, the engine returns a detailed error with the conflict location and suggested fix.</p>

  <h2>Validation Modes</h2>

  <table class="table-concept-index">
    <thead>
      <tr><th>Mode</th><th>Behavior</th><th>Use Case</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>Strict</td>
        <td>Reject on any inconsistency</td>
        <td>Production, safety-critical</td>
      </tr>
      <tr>
        <td>Warn</td>
        <td>Log warning, allow operation</td>
        <td>Development, exploration</td>
      </tr>
      <tr>
        <td>Repair</td>
        <td>Auto-adjust to fix conflicts</td>
        <td>Learning, incremental updates</td>
      </tr>
    </tbody>
  </table>

  <h2>Related Documentation</h2>

  <ul>
    <li><a href="../architecture/reasoning.html">Reasoner</a> – Uses validation during inference</li>
    <li><a href="../architecture/knowledge.html">Knowledge Layer</a> – Where validated facts are stored</li>
    <li><a href="theory_layers.html">Theory Layers</a> – Layered validation contexts</li>
    <li><a href="non_monotonic_logic.html">Non-Monotonic Logic</a> – Validation during belief revision</li>
    <li><a href="auditability.html">Auditability</a> – Logging validation decisions</li>
  </ul>

  <div class="footer-nav">
    <a href="trustworthy_ai.html">← Trustworthy AI</a> ·
    <a href="auditability.html">Auditability →</a>
  </div>
  </div>
  <script src="../reference/nav2.js"></script>
</body>
</html>
