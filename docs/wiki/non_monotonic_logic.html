<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Non-Monotonic Logic</title>
  <link rel="stylesheet" href="../reference/style.css">
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>AGISystem2 – Non-Monotonic Logic</h1>
    <small>
      <a href="../index.html">Home</a> ·
      <a href="../guides/conceptual_spaces.html">Theory</a> ·
      <a href="../architecture/index.html">Architecture</a> ·
      <a href="../api/index.html">APIs</a> ·
      <a href="../syntax/index.html">Syntax</a> ·
      <a href="../usage-cli/index.html">CLI</a> ·
      <a href="index.html">Wiki</a> ·
      <a href="../specs/matrix.html">Specs</a>
    </small>
  </div>

  <p>Non-monotonic logic allows AGISystem2 to revise conclusions when new information arrives. Unlike classical logic where adding facts never invalidates previous conclusions, non-monotonic reasoning supports defaults, exceptions, and belief revision through <a href="theory_layers.html">theory layers</a>.</p>

  <div class="diagram">
    <svg viewBox="0 0 560 340" role="img" aria-label="Non-monotonic belief revision">
      <defs>
        <marker id="arrow-nm" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
          <path d="M0,0 L6,3 L0,6 z" fill="#0f4c81" />
        </marker>
        <marker id="arrow-retract" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
          <path d="M0,0 L6,3 L0,6 z" fill="#c62828" />
        </marker>
      </defs>

      <!-- Background -->
      <rect x="0" y="0" width="560" height="340" fill="#fafbfc"/>

      <!-- Step 1: Default -->
      <rect x="20" y="20" width="160" height="100" rx="4" fill="#e1ecf7" stroke="#0f4c81" stroke-width="2"/>
      <text x="100" y="40" font-size="10" font-weight="bold" fill="#0f4c81" text-anchor="middle">1. Default Rule</text>
      <text x="35" y="60" font-size="9" fill="#4a5670">Birds typically fly</text>
      <text x="35" y="80" font-size="9" font-family="monospace" fill="#0f4c81">DEFAULT Bird → CanFly</text>
      <text x="35" y="100" font-size="9" fill="#2e7d32">Tweety IS_A Bird</text>
      <text x="35" y="115" font-size="9" fill="#2e7d32">→ Tweety CanFly ✓</text>

      <!-- Arrow -->
      <line x1="185" y1="70" x2="215" y2="70" stroke="#0f4c81" stroke-width="1.5" marker-end="url(#arrow-nm)"/>

      <!-- Step 2: Exception -->
      <rect x="220" y="20" width="160" height="100" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="2"/>
      <text x="300" y="40" font-size="10" font-weight="bold" fill="#e65100" text-anchor="middle">2. Exception Added</text>
      <text x="235" y="60" font-size="9" fill="#4a5670">New fact arrives:</text>
      <text x="235" y="80" font-size="9" font-family="monospace" fill="#e65100">Tweety IS_A Penguin</text>
      <text x="235" y="100" font-size="9" font-family="monospace" fill="#e65100">Penguin ¬CanFly</text>

      <!-- Arrow -->
      <line x1="385" y1="70" x2="415" y2="70" stroke="#c62828" stroke-width="1.5" marker-end="url(#arrow-retract)"/>

      <!-- Step 3: Revised -->
      <rect x="420" y="20" width="120" height="100" rx="4" fill="#ffebee" stroke="#c62828" stroke-width="2"/>
      <text x="480" y="40" font-size="10" font-weight="bold" fill="#c62828" text-anchor="middle">3. Revised</text>
      <text x="435" y="65" font-size="9" fill="#4a5670">Previous conclusion</text>
      <text x="435" y="80" font-size="9" fill="#4a5670">retracted:</text>
      <text x="435" y="100" font-size="9" fill="#c62828">Tweety CanFly → ✗</text>
      <text x="435" y="115" font-size="9" fill="#c62828">Tweety ¬CanFly ✓</text>

      <!-- Theory layer mechanism -->
      <rect x="20" y="140" width="250" height="90" rx="4" fill="#f5f7fb" stroke="#b0b6c4" stroke-width="1"/>
      <text x="145" y="160" font-size="10" font-weight="bold" fill="#4a5670" text-anchor="middle">Layer-Based Revision</text>

      <!-- Stack visualization -->
      <rect x="35" y="175" width="100" height="20" rx="2" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
      <text x="85" y="189" font-size="8" fill="#e65100" text-anchor="middle">Exception layer</text>

      <rect x="35" y="200" width="100" height="20" rx="2" fill="#e1ecf7" stroke="#0f4c81" stroke-width="1"/>
      <text x="85" y="214" font-size="8" fill="#0f4c81" text-anchor="middle">Default layer</text>

      <text x="155" y="195" font-size="8" fill="#4a5670">Higher layers</text>
      <text x="155" y="210" font-size="8" fill="#4a5670">override lower</text>

      <!-- Comparison -->
      <rect x="290" y="140" width="250" height="90" rx="4" fill="#f5f7fb" stroke="#b0b6c4" stroke-width="1"/>
      <text x="415" y="160" font-size="10" font-weight="bold" fill="#4a5670" text-anchor="middle">Monotonic vs Non-Monotonic</text>

      <rect x="305" y="175" width="100" height="45" rx="4" fill="#e1ecf7" stroke="#0f4c81" stroke-width="1"/>
      <text x="355" y="192" font-size="8" font-weight="bold" fill="#0f4c81" text-anchor="middle">Monotonic</text>
      <text x="355" y="207" font-size="8" fill="#4a5670" text-anchor="middle">More facts →</text>
      <text x="355" y="217" font-size="8" fill="#4a5670" text-anchor="middle">more conclusions</text>

      <rect x="420" y="175" width="105" height="45" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
      <text x="472" y="192" font-size="8" font-weight="bold" fill="#e65100" text-anchor="middle">Non-Monotonic</text>
      <text x="472" y="207" font-size="8" fill="#4a5670" text-anchor="middle">More facts →</text>
      <text x="472" y="217" font-size="8" fill="#4a5670" text-anchor="middle">may retract some</text>

      <!-- DSL syntax -->
      <rect x="20" y="245" width="520" height="80" rx="4" fill="#e1ecf7" stroke="#0f4c81" stroke-width="1"/>
      <text x="280" y="265" font-size="10" font-weight="bold" fill="#0f4c81" text-anchor="middle">Sys2DSL Syntax</text>

      <text x="35" y="290" font-size="9" font-family="monospace" fill="#0f4c81">DEFAULT Bird CAN Fly              # Default rule</text>
      <text x="35" y="310" font-size="9" font-family="monospace" fill="#e65100">EXCEPTION Penguin CANNOT Fly        # Override</text>
    </svg>
    <p class="diagram-caption">Non-monotonic reasoning allows conclusions to be retracted when exceptions are discovered. AGISystem2 implements this through theory layers: defaults live in the base layer, and exceptions in higher layers override them. The "birds fly" default is retracted for Tweety when we learn Tweety is a penguin.</p>
  </div>

  <h2>Key Concepts</h2>

  <table class="table-concept-index">
    <thead>
      <tr><th>Concept</th><th>Definition</th><th>Example</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>Default</td>
        <td>Rule that applies unless overridden</td>
        <td>"Birds typically fly"</td>
      </tr>
      <tr>
        <td>Exception</td>
        <td>Specific case that overrides default</td>
        <td>"Penguins don't fly"</td>
      </tr>
      <tr>
        <td>Specificity</td>
        <td>More specific rules override general</td>
        <td>Penguin > Bird</td>
      </tr>
      <tr>
        <td>Retraction</td>
        <td>Withdrawing a previous conclusion</td>
        <td>"Tweety flies" → retracted</td>
      </tr>
    </tbody>
  </table>

  <h2>How It Works</h2>

  <p>AGISystem2 implements non-monotonic logic through the <a href="../architecture/knowledge.html#theory-stack">TheoryStack</a>:</p>

  <ol>
    <li><strong>Defaults in base layer</strong> – General rules with DEFAULT keyword</li>
    <li><strong>Exceptions in higher layers</strong> – Override defaults when conditions match</li>
    <li><strong>Query resolution</strong> – Search from top layer down, first match wins</li>
    <li><strong>Automatic retraction</strong> – Previous conclusions invalidated by new exceptions</li>
  </ol>

  <h2>DSL Syntax</h2>

  <pre>
# Define default rule
DEFAULT Bird CAN Fly

# Define exception
EXCEPTION Penguin CANNOT Fly

# Assertions
ASSERT Tweety IS_A Penguin
ASSERT Penguin IS_A Bird

# Query (non-monotonic resolution)
ASK "Tweety CAN Fly?"
# → FALSE (Penguin exception overrides Bird default)</pre>

  <h2>Priority Resolution</h2>

  <p>When multiple rules apply, priority determines the winner:</p>

  <pre>
# Explicit priority
DEFAULT PRIORITY=10 Employee gets=StandardBenefits
DEFAULT PRIORITY=20 Executive gets=ExecutiveBenefits  # Higher priority wins

# Specificity-based (automatic)
DEFAULT Mammal IS warm_blooded      # General
EXCEPTION Platypus IS cold_blooded   # Specific override</pre>

  <h2>Validation During Revision</h2>

  <p>The <a href="validation.html">ValidationEngine</a> checks consistency during belief revision:</p>

  <pre>
// Add new fact that may trigger retractions
const result = knowledge.assertWithRevision("Tweety IS_A Penguin");

// Result includes what was retracted
{
  added: ["Tweety IS_A Penguin"],
  retracted: ["Tweety flies"],
  reason: "Exception Penguin overrides default Bird"
}</pre>

  <h2>Audit Trail</h2>

  <p>All retractions are logged for <a href="auditability.html">auditability</a>:</p>

  <pre>
{
  event: "BELIEF_RETRACTED",
  belief: "Tweety flies",
  reason: "Exception triggered by: Tweety IS_A Penguin",
  timestamp: "2024-01-15T10:30:00Z"
}</pre>

  <h2>Related Documentation</h2>

  <ul>
    <li><a href="theory_layers.html">Theory Layers</a> – Stack mechanism for defaults/exceptions</li>
    <li><a href="counterfactual.html">Counterfactuals</a> – Temporary belief revision</li>
    <li><a href="validation.html">Validation</a> – Consistency during revision</li>
    <li><a href="auditability.html">Auditability</a> – Logging retractions</li>
    <li><a href="../architecture/knowledge.html">Knowledge Layer</a> – TheoryStack implementation</li>
  </ul>

  <div class="footer-nav">
    <a href="deontic_logic.html">← Deontic Logic</a> ·
    <a href="theory_layers.html">Theory Layers →</a>
  </div>
  </div>
  <script src="../reference/nav2.js"></script>
</body>
</html>
