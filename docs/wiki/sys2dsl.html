<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sys2DSL</title>
  <link rel="stylesheet" href="../reference/style.css">
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>AGISystem2 – Sys2DSL</h1>
    <small>
      <a href="../index.html">Home</a> ·
      <a href="../guides/conceptual_spaces.html">Theory</a> ·
      <a href="../architecture/index.html">Architecture</a> ·
      <a href="../api/index.html">APIs</a> ·
      <a href="../syntax/index.html">Syntax</a> ·
      <a href="../usage-cli/index.html">CLI</a> ·
      <a href="index.html">Wiki</a> ·
      <a href="../specs/matrix.html">Specs</a>
    </small>
  </div>

  <p>Sys2DSL (System 2 Domain-Specific Language) is the structured command language used by AGISystem2. It provides a deterministic, testable, and auditable way to express knowledge and queries. This page explains the role of Sys2DSL and shows how natural language maps to structured commands.</p>

  <h2>Why a DSL?</h2>

  <p>AGISystem2 uses a constrained DSL rather than free-form natural language for several important reasons:</p>

  <ul>
    <li><strong>Determinism</strong> – The same command always produces the same result. No interpretation variability.</li>
    <li><strong>Testability</strong> – Commands can be scripted, versioned in git, and executed in CI pipelines.</li>
    <li><strong>Auditability</strong> – Every operation is logged with its exact command, enabling complete audit trails.</li>
    <li><strong>Precision</strong> – Unambiguous Subject-Relation-Object structure maps directly to geometric operations.</li>
  </ul>

  <h2>Natural Language to Sys2DSL</h2>

  <p>The <a href="../usage-cli/chat-cli.html">Chat Interface</a> uses an LLM to translate natural language into Sys2DSL commands. Here are examples of how common statements translate:</p>

  <h3>Teaching Facts</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Natural Language</th><th>Sys2DSL Command</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>"Dogs are animals"</td>
        <td><code>ASSERT Dog IS_A Animal</code></td>
      </tr>
      <tr>
        <td>"Fire causes smoke"</td>
        <td><code>ASSERT Fire CAUSES Smoke</code></td>
      </tr>
      <tr>
        <td>"Paris is located in France"</td>
        <td><code>ASSERT Paris LOCATED_IN France</code></td>
      </tr>
      <tr>
        <td>"A car has wheels"</td>
        <td><code>ASSERT Car HAS_PART Wheel</code></td>
      </tr>
      <tr>
        <td>"Driving requires a license"</td>
        <td><code>ASSERT Driving REQUIRES License</code></td>
      </tr>
      <tr>
        <td>"Speeding is prohibited by law"</td>
        <td><code>ASSERT Speeding PROHIBITED_BY Law</code></td>
      </tr>
    </tbody>
  </table>

  <h3>Asking Questions</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Natural Language</th><th>Sys2DSL Command</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>"Is a dog an animal?"</td>
        <td><code>ASK "Dog IS_A Animal?"</code></td>
      </tr>
      <tr>
        <td>"What causes smoke?"</td>
        <td><code>ASK "? CAUSES Smoke"</code></td>
      </tr>
      <tr>
        <td>"Where is Paris located?"</td>
        <td><code>ASK "Paris LOCATED_IN ?"</code></td>
      </tr>
      <tr>
        <td>"What if water were a gas?"</td>
        <td><code>CF "Water IS_A Gas?" | Water TEMPERATURE_AT Celsius200</code></td>
      </tr>
    </tbody>
  </table>

  <h2>Command Structure</h2>

  <p>Every Sys2DSL command follows a consistent pattern:</p>

  <pre>@variable COMMAND arguments</pre>

  <p>The <code>@variable</code> captures the result. The <code>COMMAND</code> specifies the operation. Arguments provide the data.</p>

  <h3>Core Commands</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Command</th><th>Purpose</th><th>Example</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><code>ASSERT</code></td>
        <td>Add a fact</td>
        <td><code>@f ASSERT Dog IS_A Animal</code></td>
      </tr>
      <tr>
        <td><code>ASK</code></td>
        <td>Query truth value</td>
        <td><code>@q ASK "Dog IS_A Animal?"</code></td>
      </tr>
      <tr>
        <td><code>RETRACT</code></td>
        <td>Remove a fact</td>
        <td><code>@r RETRACT Dog IS_A Fish</code></td>
      </tr>
      <tr>
        <td><code>FACTS_MATCHING</code></td>
        <td>Find matching facts</td>
        <td><code>@m FACTS_MATCHING ? IS_A Animal</code></td>
      </tr>
    </tbody>
  </table>

  <h3>Theory Management</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Command</th><th>Purpose</th><th>Example</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><code>THEORY_PUSH</code></td>
        <td>Create new context layer</td>
        <td><code>@_ THEORY_PUSH name="experiment"</code></td>
      </tr>
      <tr>
        <td><code>THEORY_POP</code></td>
        <td>Discard top layer</td>
        <td><code>@_ THEORY_POP</code></td>
      </tr>
      <tr>
        <td><code>LOAD_THEORY</code></td>
        <td>Load theory file</td>
        <td><code>@_ LOAD_THEORY medical</code></td>
      </tr>
      <tr>
        <td><code>SAVE_THEORY</code></td>
        <td>Save current state</td>
        <td><code>@_ SAVE_THEORY session_1</code></td>
      </tr>
    </tbody>
  </table>

  <h2>Benefits for Testing and Validation</h2>

  <h3>Automated Testing</h3>
  <p>Sys2DSL commands can be stored in test files and executed automatically:</p>

  <pre>
# test_taxonomy.sys2dsl
@f1 ASSERT Dog IS_A Mammal
@f2 ASSERT Mammal IS_A Animal
@q ASK "Dog IS_A Animal?"
# Expected: TRUE_CERTAIN (transitive)</pre>

  <h3>CI/CD Integration</h3>
  <pre>
# In GitHub Actions or similar
./bin/AGISystem2Raw.sh --batch tests/knowledge_base.sys2dsl
./bin/AGISystem2Raw.sh --exec "ask Is system consistent?" --json</pre>

  <h3>Audit Logs</h3>
  <p>Every command execution is logged with timestamp and result:</p>
  <pre>
2024-01-15 10:23:45 ASSERT Dog IS_A Animal → OK
2024-01-15 10:23:46 ASK "Dog IS_A Animal?" → TRUE_CERTAIN (0.95)
2024-01-15 10:23:47 THEORY_PUSH name="experiment" → depth=1</pre>

  <h2>The Two Interfaces</h2>

  <p>AGISystem2 provides two ways to work with Sys2DSL:</p>

  <table class="table-concept-index">
    <thead>
      <tr><th>Interface</th><th>Input</th><th>Best For</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="../usage-cli/raw-cli.html">Raw CLI</a></td>
        <td>Direct Sys2DSL commands</td>
        <td>Testing, automation, scripting</td>
      </tr>
      <tr>
        <td><a href="../usage-cli/chat-cli.html">Chat Interface</a></td>
        <td>Natural language (translated by LLM)</td>
        <td>Exploration, demos, learning</td>
      </tr>
    </tbody>
  </table>

  <p>Both interfaces execute the same underlying Sys2DSL commands. The Chat Interface adds an LLM translation layer for convenience, while the Raw CLI provides direct control for precision work.</p>

  <h2>Related Documentation</h2>

  <ul>
    <li><a href="../syntax/index.html">Syntax Reference</a> – Complete command documentation</li>
    <li><a href="../syntax/relations.html">Relations</a> – All relation types with semantics</li>
    <li><a href="../architecture/language.html">Language Layer</a> – How commands are parsed and executed</li>
    <li><a href="../usage-cli/index.html">CLI Overview</a> – Command-line interfaces</li>
    <li><a href="../api/index.html">API Reference</a> – Programmatic usage</li>
  </ul>

  <div class="footer-nav">
    <a href="index.html">Wiki</a> ·
    <a href="../syntax/index.html">Syntax Reference</a>
  </div>
  </div>
  <script src="../reference/nav2.js"></script>
</body>
</html>
