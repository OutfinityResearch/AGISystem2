<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sys2DSL</title>
  <link rel="stylesheet" href="../reference/style.css">
</head>
<body>
  <div class="page">
  <div class="nav-header">
    <h1>AGISystem2 – Sys2DSL</h1>
    <small>
      <a href="../index.html">Home</a> ·
      <a href="../guides/conceptual_spaces.html">Theory</a> ·
      <a href="../architecture/index.html">Architecture</a> ·
      <a href="../api/index.html">APIs</a> ·
      <a href="../syntax/index.html">Syntax</a> ·
      <a href="../usage-cli/index.html">CLI</a> ·
      <a href="index.html">Wiki</a> ·
      <a href="../specs/matrix.html">Specs</a>
    </small>
  </div>

  <p>Sys2DSL (System 2 Domain-Specific Language) is the structured command language used by AGISystem2. It provides a deterministic, testable, and auditable way to express knowledge and queries. This page explains the role of Sys2DSL and shows how natural language maps to structured commands.</p>

  <h2>Why a DSL?</h2>

  <p>AGISystem2 uses a constrained DSL rather than free-form natural language for several important reasons:</p>

  <ul>
    <li><strong>Determinism</strong> – The same command always produces the same result. No interpretation variability.</li>
    <li><strong>Testability</strong> – Commands can be scripted, versioned in git, and executed in CI pipelines.</li>
    <li><strong>Auditability</strong> – Every operation is logged with its exact command, enabling complete audit trails.</li>
    <li><strong>Precision</strong> – Unambiguous Subject-Relation-Object structure maps directly to geometric operations.</li>
  </ul>

  <h2>Natural Language to Sys2DSL</h2>

  <p>The <a href="../usage-cli/chat-cli.html">Chat Interface</a> uses an LLM to translate natural language into Sys2DSL commands. Here are examples of how common statements translate:</p>

  <h3>Teaching Facts</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Natural Language</th><th>Sys2DSL Command</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>"Dogs are animals"</td>
        <td><code>@_ Dog IS_A Animal</code></td>
      </tr>
      <tr>
        <td>"Fire causes smoke"</td>
        <td><code>@_ Fire CAUSES Smoke</code></td>
      </tr>
      <tr>
        <td>"Paris is located in France"</td>
        <td><code>@_ Paris LOCATED_IN France</code></td>
      </tr>
      <tr>
        <td>"A car has wheels"</td>
        <td><code>@_ Car HAS_PART Wheel</code></td>
      </tr>
      <tr>
        <td>"Driving requires a license"</td>
        <td><code>@_ Driving REQUIRES License</code></td>
      </tr>
      <tr>
        <td>"Speeding is prohibited by law"</td>
        <td><code>@_ Speeding PROHIBITED_BY Law</code></td>
      </tr>
    </tbody>
  </table>

  <h3>Asking Questions</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Natural Language</th><th>Sys2DSL Command</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>"Is a dog an animal?"</td>
        <td><code>@result Dog IS_A Animal</code></td>
      </tr>
      <tr>
        <td>"What causes smoke?"</td>
        <td><code>@result ? CAUSES Smoke</code></td>
      </tr>
      <tr>
        <td>"Where is Paris located?"</td>
        <td><code>@result Paris LOCATED_IN ?</code></td>
      </tr>
      <tr>
        <td>"What if water were a gas?"</td>
        <td><code>cf_temp PUSH any; @_ Water IS_A Gas</code></td>
      </tr>
    </tbody>
  </table>

  <h2>Command Structure</h2>

  <p>Every Sys2DSL command follows a consistent triple pattern:</p>

  <pre>@variable Subject Relation Object</pre>

  <p>The <code>@variable</code> captures the result. All operations use the Subject-Relation-Object triple syntax.</p>

  <h3>Core Commands</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Command</th><th>Purpose</th><th>Example</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><code>@_ S R O</code></td>
        <td>Add a fact</td>
        <td><code>@_ Dog IS_A Animal</code></td>
      </tr>
      <tr>
        <td><code>@var S R O</code></td>
        <td>Query truth value</td>
        <td><code>@q Dog IS_A Animal</code></td>
      </tr>
      <tr>
        <td><code>pattern FACTS any</code></td>
        <td>Find matching facts</td>
        <td><code>@m ? IS_A Animal FACTS any</code></td>
      </tr>
    </tbody>
  </table>

  <h3>Theory Management</h3>
  <table class="table-concept-index">
    <thead>
      <tr><th>Command</th><th>Purpose</th><th>Example</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><code>name PUSH any</code></td>
        <td>Create new context layer</td>
        <td><code>experiment PUSH any</code></td>
      </tr>
      <tr>
        <td><code>any POP any</code></td>
        <td>Discard top layer</td>
        <td><code>any POP any</code></td>
      </tr>
      <tr>
        <td><code>name LOAD any</code></td>
        <td>Load theory file</td>
        <td><code>medical LOAD any</code></td>
      </tr>
      <tr>
        <td><code>name SAVE any</code></td>
        <td>Save current state</td>
        <td><code>session_1 SAVE any</code></td>
      </tr>
    </tbody>
  </table>

  <h2>Benefits for Testing and Validation</h2>

  <h3>Automated Testing</h3>
  <p>Sys2DSL commands can be stored in test files and executed automatically:</p>

  <pre>
# test_taxonomy.sys2dsl
@_ Dog IS_A Mammal
@_ Mammal IS_A Animal
@q Dog IS_A Animal
# Expected: TRUE_CERTAIN (transitive)</pre>

  <h3>CI/CD Integration</h3>
  <pre>
# In GitHub Actions or similar
node cli/agisystem2-cli.js --batch tests/knowledge_base.sys2dsl
node cli/agisystem2-cli.js --exec "ask Is system consistent?" --json</pre>

  <h3>Audit Logs</h3>
  <p>Every command execution is logged with timestamp and result:</p>
  <pre>
2024-01-15 10:23:45 @_ Dog IS_A Animal → OK
2024-01-15 10:23:46 @q Dog IS_A Animal → TRUE_CERTAIN (0.95)
2024-01-15 10:23:47 experiment PUSH any → depth=1</pre>

  <h2>The Two Interfaces</h2>

  <p>AGISystem2 provides two ways to work with Sys2DSL:</p>

  <table class="table-concept-index">
    <thead>
      <tr><th>Interface</th><th>Input</th><th>Best For</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="../usage-cli/raw-cli.html">Raw CLI</a></td>
        <td>Direct Sys2DSL commands</td>
        <td>Testing, automation, scripting</td>
      </tr>
      <tr>
        <td><a href="../usage-cli/chat-cli.html">Chat Interface</a></td>
        <td>Natural language (translated by LLM)</td>
        <td>Exploration, demos, learning</td>
      </tr>
    </tbody>
  </table>

  <p>Both interfaces execute the same underlying Sys2DSL commands. The Chat Interface adds an LLM translation layer for convenience, while the Raw CLI provides direct control for precision work.</p>

  <h2>Related Documentation</h2>

  <ul>
    <li><a href="../syntax/index.html">Syntax Reference</a> – Complete command documentation</li>
    <li><a href="../syntax/relations.html">Relations</a> – All relation types with semantics</li>
    <li><a href="../architecture/language.html">Language Layer</a> – How commands are parsed and executed</li>
    <li><a href="../usage-cli/index.html">CLI Overview</a> – Command-line interfaces</li>
    <li><a href="../api/index.html">API Reference</a> – Programmatic usage</li>
  </ul>

  <div class="footer-nav">
    <a href="index.html">Wiki</a> ·
    <a href="../syntax/index.html">Syntax Reference</a>
  </div>
  </div>
  <script src="../reference/nav2.js"></script>
</body>
</html>
