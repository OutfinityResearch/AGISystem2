{
  "id": "18_audit_trail",
  "name": "Audit Trail Completeness",
  "description": "Checks that required audit artifacts exist before sign-off",

  "theory": {
    "natural_language": "An audit-ready change must include a ticket link, code review evidence, and test results. If any artifact is missing, the change is not auditable. Hotfixes still require ticket links and tests. Change X has ticket and tests but no code review. Change Y has all three. Change Z is a hotfix with ticket but no tests.",
    "expected_facts": [
      "audit_ready REQUIRES ticket_link",
      "audit_ready REQUIRES code_review",
      "audit_ready REQUIRES test_results",
      "missing_artifact IMPLIES not_auditable",
      "hotfix REQUIRES ticket_link",
      "hotfix REQUIRES test_results",
      "ChangeX HAS ticket_link",
      "ChangeX LACKS code_review",
      "ChangeX HAS test_results",
      "ChangeY HAS ticket_link",
      "ChangeY HAS code_review",
      "ChangeY HAS test_results",
      "ChangeZ IS_A hotfix",
      "ChangeZ HAS ticket_link",
      "ChangeZ LACKS test_results"
    ]
  },

  "queries": [
    {
      "id": "q1",
      "natural_language": "Is Change X auditable?",
      "expected_answer": {
        "natural_language": "No. Change X lacks code review, so it is not auditable.",
        "truth": "FALSE",
        "explanation": "audit_ready REQUIRES code_review ∧ ChangeX LACKS code_review"
      }
    },
    {
      "id": "q2",
      "natural_language": "Does Change Y meet audit-ready criteria?",
      "expected_answer": {
        "natural_language": "Yes. Change Y has ticket, code review, and test results.",
        "truth": "TRUE_CERTAIN",
        "explanation": "ChangeY HAS ticket_link ∧ code_review ∧ test_results"
      }
    },
    {
      "id": "q3",
      "natural_language": "Can Change Z ship as a hotfix without tests?",
      "expected_answer": {
        "natural_language": "No. Even hotfixes require tests and a ticket; Change Z lacks tests.",
        "truth": "FALSE",
        "explanation": "hotfix REQUIRES test_results ∧ ChangeZ LACKS test_results"
      }
    }
  ],

  "tags": ["quality", "audit", "checklist", "conjunction"]
}
